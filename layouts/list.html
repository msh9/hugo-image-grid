{{ define "main" }}
  {{/* For a section, show its images plus descendant page images */}}
  {{ $scratch := newScratch }}
  {{ $scratch.Set "images" (slice) }}

  {{ with .Resources.ByType "image" }}
    {{ $scratch.Add "images" . }}
  {{ end }}

  {{ range .RegularPagesRecursive }}
    {{ with .Resources.ByType "image" }}
      {{ $scratch.Add "images" . }}
    {{ end }}
  {{ end }}

  {{ $images := $scratch.Get "images" }}

  {{ with .Title }}<h1 class="page-title">{{ . }}</h1>{{ end }}
  {{ with .Content }}<div class="content">{{ . }}</div>{{ end }}

  {{ if gt (len $images) 0 }}
        {{ partial "image-grid.html" (dict "images" $images) }}
  {{ else }}
      <p>No images found in this section.</p>
  {{ end }}
{{ end }}